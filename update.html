<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Html OS</title>
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%; overflow: hidden;
      font-family: sans-serif;
      background: url('https://uploads.onecompiler.io/43vt3gzsr/43vt9fzgb/img1.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    #boot-screen {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #000; display: flex; justify-content: center; align-items: center;
      z-index: 9999;
    }
    .spinner {
      border: 16px solid #f3f3f3; border-top: 16px solid #3498db; border-radius: 50%;
      width: 120px; height: 120px; animation: spin 2s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    #taskbar {
      position: fixed; bottom: 0; width: 100%; height: 40px;
      background: rgba(0,0,0,0.8); color: white; display: flex; align-items: center;
      padding: 0 10px; z-index: 1000;
    }
    #start-button {
      background: #222; border: none; color: white; padding: 6px;
      cursor: pointer; border-radius: 3px;
    }
    #taskbar-apps {
      display: flex; margin-left: 10px;
    }
    .task-btn {
      background: #333; border: none; color: white; padding: 6px 10px;
      margin-right: 5px; cursor: pointer; border-radius: 3px;
    }
    #start-menu {
      position: fixed; bottom: 40px; left: 10px; width: 200px;
      background: rgba(50,50,50,0.95); color: white; display: none;
      flex-direction: column; border: 1px solid #444; border-radius: 5px; padding: 5px; z-index: 1001;
    }
    #start-menu button {
      background: none; border: none; color: white; padding: 8px;
      text-align: left; cursor: pointer; width: 100%;
    }
    .window {
      position: absolute; width: 600px; height: 400px;
      background: #f0f0f0; border: 1px solid #888; box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
      display: none; z-index: 500; top: 50px; left: 50px;
    }
    .title-bar {
      background: #333; color: white; padding: 5px;
      cursor: move; display: flex; justify-content: space-between; align-items: center;
    }
    .title-bar.maximized {
      cursor: default;
    }
    .window.maximized {
      top: 0 !important; left: 0 !important; width: 100% !important; height: calc(100% - 40px) !important;
    }
    .win-btn {
      background: #444; border: none; color: white; width: 20px;
      height: 20px; line-height: 20px; text-align: center;
      border-radius: 50%; cursor: pointer; margin-left: 5px;
    }
    .min-btn { background: orange; }
    .max-btn { background: green; }
    .close-btn { background: red; }
    .content {
      padding: 10px; height: calc(100% - 30px); overflow: auto;
      background: white;
    }
    #explorer-list {
      list-style: none; padding: 0; margin: 0;
    }
    #explorer-list li {
      padding: 5px; border-bottom: 1px solid #ccc; cursor: pointer;
    }
    #explorer-actions {
      margin-bottom: 5px;
    }
    #explorer-actions button {
      margin-right: 5px;
    }
    #context-menu {
      position: absolute; width: 150px;
      background: rgba(50,50,50,0.95); color: white;
      border: 1px solid #444; border-radius: 5px; padding: 5px;
      display: none; flex-direction: column; z-index: 1002;
    }
    #context-menu button {
      background: none; border: none; color: white; padding: 8px;
      text-align: left; cursor: pointer; width: 100%;
    }
    #context-menu button:hover {
      background: rgba(255,255,255,0.1);
    }
    .desktop-icon {
      position: absolute; top: 20px; left: 20px; width: 80px; text-align: center;
      color: white; cursor: pointer; z-index: 400;
    }
    .desktop-icon div {
      width: 50px; height: 50px; margin: 0 auto;
      background: rgba(0,0,0,0.5); border-radius: 5px;
    }
    .desktop-icon span {
      display: block; margin-top: 5px; font-size: 12px; text-shadow: 1px 1px 2px #000;
    }
    #browser-url-bar {
      display: flex; margin-bottom: 5px;
    }
    #browser-url {
      flex-grow: 1; padding: 5px; border: 1px solid #ccc;
    }
    #browser-go {
      padding: 5px 10px; border: 1px solid #ccc; cursor: pointer;
    }
    #browser-frame {
      width: 100%; height: calc(100% - 30px); border: none;
    }
  </style>
</head>
<body>
  <!-- Boot Screen -->
  <div id="boot-screen">
    <div class="spinner"></div>
  </div>

  <!-- Desktop Icon -->
  <div class="desktop-icon" ondblclick="showWindow('browser')">
    <div></div>
    <span>Browser</span>
  </div>

  <!-- Taskbar and Start Menu -->
  <div id="taskbar">
    <button id="start-button">Start</button>
    <div id="taskbar-apps"></div>
    <span style="margin-left: auto; padding-right: 10px;">Mini Web OS</span>
  </div>
  <div id="start-menu">
    <button id="open-notepad">Notepad</button>
    <button id="open-explorer">File Explorer</button>
    <button id="open-browser">Browser</button>
  </div>

  <!-- Notepad Window -->
  <div class="window" id="notepad" style="width: 300px; height: 200px;">
    <div class="title-bar" onmousedown="startDrag(event, 'notepad')">
      <span>Notepad</span>
      <div>
        <button class="win-btn min-btn" onclick="minimizeWindow('notepad')">−</button>
        <button class="win-btn max-btn" onclick="toggleMaximize('notepad')">□</button>
        <button class="win-btn close-btn" onclick="closeWindow('notepad')">×</button>
      </div>
    </div>
    <div class="content">
      <textarea style="width:100%; height:100%; resize:none;">Type here...</textarea>
    </div>
  </div>

  <!-- File Explorer Window -->
  <div class="window" id="explorer" style="width: 300px; height: 200px;">
    <div class="title-bar" onmousedown="startDrag(event, 'explorer')">
      <span>File Explorer</span>
      <div>
        <button class="win-btn min-btn" onclick="minimizeWindow('explorer')">−</button>
        <button class="win-btn max-btn" onclick="toggleMaximize('explorer')">□</button>
        <button class="win-btn close-btn" onclick="closeWindow('explorer')">×</button>
      </div>
    </div>
    <div class="content">
      <div id="explorer-actions">
        <button onclick="createItem('folder')">New Folder</button>
        <button onclick="createItem('file')">New Text File</button>
      </div>
      <ul id="explorer-list"></ul>
    </div>
  </div>

  <!-- Browser Window -->
  <div class="window" id="browser">
    <div class="title-bar" onmousedown="startDrag(event, 'browser')">
      <span>Web Browser</span>
      <div>
        <button class="win-btn min-btn" onclick="minimizeWindow('browser')">−</button>
        <button class="win-btn max-btn" onclick="toggleMaximize('browser')">□</button>
        <button class="win-btn close-btn" onclick="closeWindow('browser')">×</button>
      </div>
    </div>
    <div class="content">
      <div id="browser-url-bar">
        <input id="browser-url" type="text" placeholder="Enter URL or search query" />
        <button id="browser-go" onclick="navigateBrowser()">Go</button>
      </div>
      <iframe id="browser-frame" src="about:blank"></iframe>
    </div>
  </div>

  <!-- Context Menu for File Explorer -->
  <div id="context-menu">
    <button id="context-rename">Rename</button>
    <button id="context-delete">Delete</button>
    <button id="context-edit-content">Edit Content</button>
  </div>

  <script>
    let dragTarget = null, offsetX = 0, offsetY = 0;
    const fsData = {};
    let contextTarget = null;

    window.onload = () => {
      setTimeout(() => {
        document.getElementById('boot-screen').style.display = 'none';
      }, 3000); // Hide boot screen after 3 seconds
    };

    function startDrag(e, id) {
      const windowEl = document.getElementById(id);
      if (windowEl.classList.contains('maximized')) return;
      dragTarget = windowEl;
      offsetX = e.clientX - dragTarget.offsetLeft;
      offsetY = e.clientY - dragTarget.offsetTop;
      document.addEventListener('mousemove', dragMove);
      document.addEventListener('mouseup', stopDrag);
    }
    function dragMove(e) {
      if (!dragTarget) return;
      dragTarget.style.left = `${e.clientX - offsetX}px`;
      dragTarget.style.top = `${e.clientY - offsetY}px`;
    }
    function stopDrag() {
      dragTarget = null;
      document.removeEventListener('mousemove', dragMove);
      document.removeEventListener('mouseup', stopDrag);
    }

    function showWindow(id) {
      const w = document.getElementById(id);
      w.style.display = 'block';
      removeTaskbarButton(id);
    }

    function closeWindow(id) {
      const w = document.getElementById(id);
      w.style.display = 'none';
      removeTaskbarButton(id);
    }

    function minimizeWindow(id) {
      const w = document.getElementById(id);
      w.style.display = 'none';
      addTaskbarButton(id, w.querySelector('.title-bar span').textContent);
    }

    function toggleMaximize(id) {
      const w = document.getElementById(id);
      if (w.classList.contains('maximized')) {
        // Restore
        w.style.top = w.dataset.origTop;
        w.style.left = w.dataset.origLeft;
        w.style.width = w.dataset.origWidth;
        w.style.height = w.dataset.origHeight;
        w.classList.remove('maximized');
        w.querySelector('.title-bar').classList.remove('maximized');
      } else {
        // Maximize
        w.dataset.origTop = w.style.top;
        w.dataset.origLeft = w.style.left;
        w.dataset.origWidth = w.style.width;
        w.dataset.origHeight = w.style.height;
        w.classList.add('maximized');
        w.querySelector('.title-bar').classList.add('maximized');
      }
    }

    function addTaskbarButton(id, title) {
      const existing = document.querySelector(`.task-btn[data-id="${id}"]`);
      if (existing) return;
      const btn = document.createElement('button');
      btn.classList.add('task-btn');
      btn.dataset.id = id;
      btn.textContent = title;
      btn.onclick = () => {
        showWindow(id);
        removeTaskbarButton(id);
      };
      document.getElementById('taskbar-apps').appendChild(btn);
    }

    function removeTaskbarButton(id) {
      const btn = document.querySelector(`.task-btn[data-id="${id}"]`);
      if (btn) btn.remove();
    }

    document.getElementById('start-button').onclick = () => {
      const menu = document.getElementById('start-menu');
      menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
    };
    window.onclick = e => {
      if (!document.getElementById('start-menu').contains(e.target) &&
          e.target.id !== 'start-button') {
        document.getElementById('start-menu').style.display = 'none';
      }
      if (!document.getElementById('context-menu').contains(e.target)) {
        document.getElementById('context-menu').style.display = 'none';
      }
    };

    document.getElementById('open-notepad').onclick = () => showWindow('notepad');
    document.getElementById('open-explorer').onclick = () => showWindow('explorer');
    document.getElementById('open-browser').onclick = () => showWindow('browser');

    function createItem(type) {
      const name = prompt(`Enter ${type} name:`);
      if (!name) return;
      fsData[name] = { type, content: type === 'file' ? '' : null };
      renderExplorer();
    }

    function renderExplorer() {
      const ul = document.getElementById('explorer-list');
      ul.innerHTML = '';
      for (const name in fsData) {
        const li = document.createElement('li');
        li.textContent = fsData[name].type === 'folder' ? `[Folder] ${name}` : `${name}.txt`;
        li.onclick = () => {
          if (fsData[name].type === 'file') {
            const text = prompt('Edit file content:', fsData[name].content);
            if (text !== null) fsData[name].content = text;
          } else {
            alert('This is a folder!');
          }
        };
        li.oncontextmenu = e => {
          e.preventDefault();
          contextTarget = name;
          const menu = document.getElementById('context-menu');
          menu.style.left = `${e.clientX}px`;
          menu.style.top = `${e.clientY}px`;
          menu.style.display = 'flex';
          document.getElementById('context-edit-content').style.display = fsData[name].type === 'file' ? 'block' : 'none';
        };
        ul.appendChild(li);
      }
    }

    document.getElementById('context-rename').onclick = () => {
      if (!contextTarget) return;
      const newName = prompt('Enter new name:', contextTarget);
      if (newName && newName !== contextTarget && !fsData[newName]) {
        fsData[newName] = fsData[contextTarget];
        delete fsData[contextTarget];
        renderExplorer();
      }
      document.getElementById('context-menu').style.display = 'none';
    };

    document.getElementById('context-delete').onclick = () => {
      if (!contextTarget) return;
      if (confirm(`Delete ${fsData[contextTarget].type} "${contextTarget}"?`)) {
        delete fsData[contextTarget];
        renderExplorer();
      }
      document.getElementById('context-menu').style.display = 'none';
    };

    document.getElementById('context-edit-content').onclick = () => {
      if (!contextTarget || fsData[contextTarget].type !== 'file') return;
      const text = prompt('Edit file content:', fsData[contextTarget].content);
      if (text !== null) fsData[contextTarget].content = text;
      document.getElementById('context-menu').style.display = 'none';
    };

    function navigateBrowser() {
      let input = document.getElementById('browser-url').value.trim();
      if (!input) return;

      let url;
      if (input.startsWith('http://') || input.startsWith('https://')) {
        url = input;
      } else if (input.includes('.') && !input.includes(' ')) {
        url = 'https://' + input;
      } else {
        url = 'https://www.google.com/search?q=' + encodeURIComponent(input);
      }

      document.getElementById('browser-frame').src = url;
      document.getElementById('browser-url').value = url;
    }

    // Allow Enter key to trigger browser navigation
    document.getElementById('browser-url').addEventListener('keypress', e => {
      if (e.key === 'Enter') navigateBrowser();
    });
  </script>
</body>
</html>
